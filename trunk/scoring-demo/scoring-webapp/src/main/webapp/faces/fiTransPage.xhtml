<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:body>
	<ui:composition template="/template/template.xhtml">
		<ui:define name="content">
			<h:form id="fiTransForm">
				<p:messages id="messages" showDetail="true" autoUpdate="true"
					showSummary="false" />
				<p:panel header="Financial Transaction Filter" columns="1"
					cellpadding="0" style="width:100%">
					<h:panelGrid header="Financial Transaction Filter" columns="8"
						cellpadding="1" style="width:100%">
						<h:outputText for="fromDate" value="From Date(*):"></h:outputText>
						<p:calendar id="fromDate" label="From Date"
							value="#{mbFinancialTransactions.filter.fromOrderTime}"
							required="true" effect="slideDown" pattern="dd/MM/yyyy"></p:calendar>

						<h:outputText for="toDate" value=" To Date(*):"></h:outputText>
						<p:calendar id="toDate" label="To Date"
							value="#{mbFinancialTransactions.filter.toOrderTime}"
							required="true" effect="slideDown" pattern="dd/MM/yyyy"></p:calendar>

						<h:outputLabel value="Transaction Type:" for="transType" />
						<p:selectOneMenu style="width:300px"
							value="#{mbFinancialTransactions.filter.transType}"
							required="false" id="transType">
							<f:selectItem itemLabel="Select One" itemValue="" />
							<f:selectItems value="#{mbFinancialTransactions.transTypes}" />

						</p:selectOneMenu>

						<h:outputLabel value="Transaction Response:" for="resCode" />
						<p:selectOneMenu style="width:300px"
							value="#{mbFinancialTransactions.filter.transResCode}"
							required="false" id="resCode">
							<f:selectItem itemLabel="Select One" itemValue="" />
							<f:selectItems value="#{mbFinancialTransactions.transResCodes}" />
						</p:selectOneMenu>

						<p:commandButton value="Search"
							actionListener="#{mbFinancialTransactions.search}"
							update=":fiTransForm:transTablePanel,:fiTransForm:tabPanel"></p:commandButton>
					</h:panelGrid>
				</p:panel>

				<p:panel id="transTablePanel" style="width:100%">
					<p:dataTable id="transTable" var="item" paginator="true" rows="5"
						paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink}
											{PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						value="#{mbFinancialTransactions.list}" rowKey="#{item.id}"
						selection="#{mbFinancialTransactions.selected}"
						selectionMode="single">

						<p:ajax event="rowSelect"
							listener="#{mbFinancialTransactions.onRowSelect}"
							update=":fiTransForm:tabPanel">
						</p:ajax>
						<p:column>
							<f:facet name="header">
								<h:outputText value="Trans Type" />
							</f:facet>
							<h:outputText value="#{item.transType}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Description" />
							</f:facet>
							<h:outputText value="#{item.transTypeDes}" />

						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Orig Trans Number" />
							</f:facet>
							<h:outputText value="#{item.origQid}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Merchant Code" />
							</f:facet>
							<h:outputText value="#{item.merId}" />
						</p:column>

						<p:column headerText="Acquirer Code">
							<f:facet name="header">
								<h:outputText value="Acquirer Code" />
							</f:facet>
							<h:outputText value="#{item.acqCode}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputText value="Goods Name" />
							</f:facet>
							<h:outputText value="#{item.commodityName}" />

						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputText value="Goods Price" />
							</f:facet>
							<h:outputText value="#{item.commodityUnitPrice}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputText value="Goods Quantity" />
							</f:facet>
							<h:outputText value="#{item.commodityQuantity}" />

						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputText value="Order Number" />
							</f:facet>
							<h:outputText value="#{item.orderNumber}" />

						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputText value="Trans Amount" />
							</f:facet>
							<h:outputText value="#{item.orderAmount}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Trans Currency" />
							</f:facet>
							<h:outputText value="#{item.orderCurrency}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Order Time" />
							</f:facet>
							<h:outputText value="#{item.orderTime}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Customer Name" />
							</f:facet>
							<h:outputText value="#{item.customerName}" />
						</p:column>
					</p:dataTable>
				</p:panel>

				<p:panel id="tabPanel" style="width:100%" autoUpdate="true">
					<p:tabView id="transResTab">
						<p:tab title="Transaction Response Message" id="transResTab">

							<p:dataTable id="transResTable" var="item" paginator="true"
								paginatorTemplate="{CurrentPageReport}  {FirstPageLink}
											{PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								rows="5" value="#{mbFinancialTransactions.transResMessage}"
								rowKey="#{item.id}">

								<p:column>
									<f:facet name="header">
										<h:outputText value="Trans Type" />
									</f:facet>
									<h:outputText value="#{item.transType}" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Trans Number" />
									</f:facet>
									<h:outputText value="#{item.qid}" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Response Code" />
									</f:facet>
									<h:outputText value="#{item.respCode}" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Response Messages" />
									</f:facet>
									<h:outputText value="#{item.respMsg}" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Trans Time" />
									</f:facet>
									<h:outputText value="#{item.respTime}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Order Number" />
									</f:facet>
									<h:outputText value="#{item.orderNumber}" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Trans Amount" />
									</f:facet>
									<h:outputText value="#{item.orderAmount}" />

								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Trans Currency" />
									</f:facet>
									<h:outputText value="#{item.orderCurrency}" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Settlement Amount" />
									</f:facet>
									<h:outputText value="#{item.settleAmount}" />

								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Settlement Currency" />
									</f:facet>
									<h:outputText value="#{item.settleCurrency}" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Settlement Date" />
									</f:facet>
									<h:outputText value="#{item.settleDate}" />
								</p:column>

							</p:dataTable>

						</p:tab>

						<p:tab title="Inquiry Request Message" id="inquiryReqTab">
							<p:dataTable id="inquiryReqTable" var="item" paginator="true"
								paginatorTemplate="{CurrentPageReport}  {FirstPageLink}
											{PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								rows="5"
								value="#{mbFinancialTransactions.inquiryRequestMessages}"
								rowKey="#{item.id}">

								<p:column>
									<f:facet name="header">
										<h:outputText value="Transaction Type" />
									</f:facet>
									<h:outputText value="#{item.transType}" />

								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Merchant Id" />
									</f:facet>
									<h:outputText value="#{item.merId}" />

								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Order Number" />
									</f:facet>
									<h:outputText value="#{item.orderNumber}" />

								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Order Time" />
									</f:facet>
									<h:outputText value="#{item.orderTime}" />
								</p:column>
							</p:dataTable>

						</p:tab>

						<p:tab title="Inquiry Response Message" id="inquiryResTab">
							<p:dataTable id="inquiryResTable" var="item" paginator="true"
								paginatorTemplate="{CurrentPageReport}  {FirstPageLink}
											{PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								rows="5" value="#{mbFinancialTransactions.inquiryResMessages}"
								rowKey="#{item.id}">

								<p:column>
									<f:facet name="header">
										<h:outputText value="Trans Type" />
									</f:facet>
									<h:outputText value="#{item.transType}" />

								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Response Code" />
									</f:facet>
									<h:outputText value="#{item.respCode}" />

								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Response Time" />
									</f:facet>
									<h:outputText value="#{item.respTime}" />

								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Trans Number" />
									</f:facet>
									<h:outputText value="#{item.qid}" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Trace Time" />
									</f:facet>
									<h:outputText value="#{item.traceTime}" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Inquiry Results" />
									</f:facet>
									<h:outputText value="#{item.queryResult}" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Settlement Amount" />
									</f:facet>
									<h:outputText value="#{item.settleAmount}" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Settlement Currency" />
									</f:facet>
									<h:outputText value="#{item.settleCurrency}" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Settlement Date" />
									</f:facet>
									<h:outputText value="#{item.settleDate}" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Exchange Rate" />
									</f:facet>
									<h:outputText value="#{item.exchangeRate}" />
								</p:column>
							</p:dataTable>

						</p:tab>
					</p:tabView>
				</p:panel>
			</h:form>
		</ui:define>
	</ui:composition>
</h:body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:body>
	<h:form id="transForm">
		<p:messages id="transMessages" showDetail="true" autoUpdate="true"
			showSummary="false" />

		<p:panel header="Transaction Filter">
			<h:panelGrid header="Transaction Filter" columns="8" cellpadding="1"
				style="width:100%">
				<h:outputText value="From Date(*):"></h:outputText>
				<p:calendar id="fromDate" label="From Date"
					value="#{mbReports.filter.fromOrderTime}" required="true"
					effect="slideDown" pattern="dd/MM/yyyy"></p:calendar>
				<h:outputText value=" To Date(*):"></h:outputText>

				<p:calendar id="toDate" label="To Date"
					value="#{mbReports.filter.toOrderTime}" required="true"
					effect="slideDown" pattern="dd/MM/yyyy"></p:calendar>

				<h:outputLabel value="Transaction Type:" for="transType" />
				<p:selectOneMenu style="width:300px"
					value="#{mbReports.filter.transType}" required="false"
					id="transType">
					<f:selectItem itemLabel="Select One" itemValue="" />
					<f:selectItems value="#{mbReports.transTypes}" />

				</p:selectOneMenu>

				<h:outputLabel value="Transaction Response:" for="resCode" />
				<p:selectOneMenu style="width:300px"
					value="#{mbReports.filter.transResCode}" required="false"
					id="resCode">
					<f:selectItem itemLabel="Select One" itemValue="" />
					<f:selectItems value="#{mbReports.transResCodes}" />
				</p:selectOneMenu>

				<p:commandButton value="Search" actionListener="#{mbReports.search}"
					update=":transForm:transTablePanel"></p:commandButton>
			</h:panelGrid>
		</p:panel>

		<p:panel id="transTablePanel">
			<p:dataTable id="transTable" var="item" paginator="true" rows="5"
				paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink}
											{PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
				value="#{mbReports.list}" rowKey="#{item.id}">

				<p:column>
					<f:facet name="header">
						<h:outputText value="Trans Type" />
					</f:facet>
					<h:outputText value="#{item.transactionType}" />
				</p:column>

				<p:column>
					<f:facet name="header">
						<h:outputText value="Merchant Code" />
					</f:facet>
					<h:outputText value="#{item.merId}" />
				</p:column>

				<p:column headerText="Acquirer Code">
					<f:facet name="header">
						<h:outputText value="Acquirer Code" />
					</f:facet>
					<h:outputText value="#{item.acqCode}" />
				</p:column>

				<p:column>
					<f:facet name="header">
						<h:outputText value="Customer Name" />
					</f:facet>
					<h:outputText value="#{item.customerName}" />
				</p:column>

				<p:column>
					<f:facet name="header">
						<h:outputText value="Goods Name" />
					</f:facet>
					<h:outputText value="#{item.commodityName}" />

				</p:column>

				<p:column>
					<f:facet name="header">
						<h:outputText value="Goods Quantity" />
					</f:facet>
					<h:outputText value="#{item.commodityQuantity}" />

				</p:column>

				<p:column>
					<f:facet name="header">
						<h:outputText value="Trans Amount" />
					</f:facet>
					<h:outputText value="#{item.orderAmount}" />
				</p:column>

				<p:column>
					<f:facet name="header">
						<h:outputText value="Order Time" />
					</f:facet>
					<h:outputText value="#{item.orderTime}" />
				</p:column>

				<p:column>
					<f:facet name="header">
						<h:outputText value="Transaction Response" />
					</f:facet>
					<h:outputText value="#{item.transResCode}" />
				</p:column>

				<p:column>
					<f:facet name="header">
						<h:outputText value="Response Messages" />
					</f:facet>
					<h:outputText value="#{item.transResMsg}" />
				</p:column>


			</p:dataTable>
		</p:panel>

		<h:panelGrid columns="2" width="100%">
			<p:panel header="Export All Data">
				<h:commandLink>
					<p:graphicImage value="/images/excel.png" />
					<p:dataExporter type="xls" target="transTable"
						fileName="transactions" />
				</h:commandLink>

				<h:commandLink>
					<p:graphicImage value="/images/pdf.png" />
					<p:dataExporter type="pdf" target="transTable"
						fileName="transactions" />
				</h:commandLink>

				<h:commandLink>
					<p:graphicImage value="/images/csv.png" />
					<p:dataExporter type="csv" target="transTable"
						fileName="transactions" />
				</h:commandLink>

				<h:commandLink>
					<p:graphicImage value="/images/xml.png" />
					<p:dataExporter type="xml" target="transTable"
						fileName="transactions" />
				</h:commandLink>
			</p:panel>

			<p:panel header="Export Page Data">
				<h:commandLink>
					<p:graphicImage value="/images/excel.png" />
					<p:dataExporter type="xls" target="transTable"
						fileName="transactions" pageOnly="true" />
				</h:commandLink>

				<h:commandLink>
					<p:graphicImage value="/images/pdf.png" />
					<p:dataExporter type="pdf" target="transTable"
						fileName="transactions" pageOnly="true" />
				</h:commandLink>

				<h:commandLink>
					<p:graphicImage value="/images/csv.png" />
					<p:dataExporter type="csv" target="transTable"
						fileName="transactions" pageOnly="true" />
				</h:commandLink>

				<h:commandLink>
					<p:graphicImage value="/images/xml.png" />
					<p:dataExporter type="xml" target="transTable"
						fileName="transactions" pageOnly="true" />
				</h:commandLink>
			</p:panel>
		</h:panelGrid>
	</h:form>
</h:body>
</html>